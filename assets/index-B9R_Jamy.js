(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const l of t)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function i(t){const l={};return t.integrity&&(l.integrity=t.integrity),t.referrerPolicy&&(l.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?l.credentials="include":t.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(t){if(t.ep)return;t.ep=!0;const l=i(t);fetch(t.href,l)}})();let u,f,v,h,o,m=!0,p="x",d="circle",c,E=360,C=720,g,L,a="normal";const A=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],x=[[0,1,2,3,4,5],[6,7,8,9,10,11],[12,13,14,15,16,17],[18,19,20,21,22,23],[24,25,26,27,28,29],[30,31,32,33,34,35],[0,6,12,18,24,30],[1,7,13,19,25,31],[2,8,14,20,26,32],[3,9,15,21,27,33],[4,10,16,22,28,34],[5,11,17,23,29,35],[0,7,14,21,28,35],[5,10,15,20,25,30]];window.onload=function(){N()};function N(){if(u=document.getElementById("board"),f=document.getElementById("winner"),v=document.getElementById("restart"),h=document.getElementById("game-chooser"),g=document.getElementById("depth-slider"),L=document.getElementById("depth-value"),u.innerHTML="",a!=="crazy"&&a!=="crazy-bot"){u.style.width=E+"px",u.style.height=E+"px",u.style.backgroundImage="url('tic-tac-to-bg.png')";for(let e=0;e<9;e++)o=document.createElement("div"),o.id=e.toString(),u.appendChild(o),o.addEventListener("click",T);c=Array(9).fill(null)}else{u.style.width=C+"px",u.style.height=C+"px",u.style.backgroundImage="url('crazy-board.png')";for(let e=0;e<36;e++)o=document.createElement("div"),o.id=e.toString(),u.appendChild(o),o.addEventListener("click",T);c=Array(36).fill(null)}g.addEventListener("input",function(){L.innerText=g.value}),v.addEventListener("click",O),h.addEventListener("change",_)}function _(){a=h.value,console.log(a),N(),O()}function w(){m=!m}function I(){return c.every(e=>e!==null)}function P(){if((a==="bot"||a==="crazy-bot")&&!m){console.log("AI's turn");const e=parseInt(g.value);let n=-1,i=-1/0;for(let r=0;r<c.length;r++)if(c[r]===null){c[r]=d;let t=B(c,0,!1,e);c[r]=null,t>i&&(i=t,n=r)}if(n>=0){let r=document.getElementById(n.toString());if(r){const t=document.createElement("img");if(t.src="circle.png",r.appendChild(t),r.classList.add(d),c[n]=d,b(d)){f.innerText="Player 2 wins!";return}else if(I()){f.innerText="It's a tie!";return}w()}}}}function z(e){let n=0;for(const i of x){const[r,t]=i.reduce(([l,s],y)=>(e[y]===d?l++:e[y]===p&&s++,[l,s]),[0,0]);r===5?n+=100:r===4?n+=10:t===5?n-=100:t===4&&(n-=10)}return n}function B(e,n,i,r){const t=i?d:p;if(n>=r)return z(e);if(b(t))return i?100-n:n-100;if(I())return 0;let l=i?-1/0:1/0;for(let s=0;s<e.length;s++)if(e[s]===null){e[s]=t;let y=B(e,n+1,!i,r);e[s]=null,i?l=Math.max(y,l):l=Math.min(y,l)}return l}function b(e){return(a==="crazy"||a==="crazy-bot"?x:A).some(i=>i.every(r=>c[r]===e))}function O(){c=Array(a==="crazy"||a==="crazy-bot"?36:9).fill(null),f.innerText="Who will win!",u.querySelectorAll("div").forEach(i=>{i.innerHTML="",i.classList.remove(p,d)}),m=!0}function T(){o=this;let e=m?p:d;if(!c[o.id]){const n=document.createElement("img");n.src=m?"cross.png":"circle.png",o.appendChild(n),o.classList.add(e),c[o.id]=e,b(e)?f.innerText=`${e===p?"Player 1":"Player 2"} wins!`:I()?f.innerText="It's a tie!":(w(),P())}}
